# Admin Dashboard Specification

## Overview

"연정" 서비스 운영자용 관리 패널 스펙입니다.
Route: `/admin/*`

## Access Control

### Admin Roles

| Role | Permissions |
|------|-------------|
| **SUPER_ADMIN** | 모든 권한 + 관리자 관리 |
| **ADMIN** | 사용자/청첩장/쿠폰 관리 |
| **OPERATOR** | 조회 + 쿠폰 생성만 가능 |

### Authentication
- 별도 관리자 계정 (OAuth 미사용)
- Email + Password 로그인
- 2FA 필수 (TOTP)
- IP 화이트리스트 (Optional)

---

## Dashboard Overview

### Main Dashboard (`/admin`)

```
┌─────────────────────────────────────────────────────────────────┐
│  연정 Admin                              [알림] [프로필] [로그아웃]│
├─────────┬───────────────────────────────────────────────────────┤
│         │                                                       │
│ 대시보드 │   📊 오늘의 현황                                       │
│         │   ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐        │
│ 사용자   │   │ 신규가입 │ │ 발행수  │ │ 조회수  │ │ 매출    │        │
│         │   │   12   │ │   8    │ │ 15.2K  │ │ 320만  │        │
│ 청첩장   │   └────────┘ └────────┘ └────────┘ └────────┘        │
│         │                                                       │
│ 쿠폰    │   📈 주간 트렌드                                       │
│         │   [차트 영역]                                          │
│ 방명록   │                                                       │
│         │   🔥 최근 활동                                         │
│ 통계    │   - 10:30 민영♥지훈 청첩장 발행                         │
│         │   - 10:25 신규 가입 (카카오)                            │
│ 설정    │   - 10:20 쿠폰 YJ-XXXX 사용                            │
│         │                                                       │
└─────────┴───────────────────────────────────────────────────────┘
```

### KPI Cards

| Metric | Description | Comparison |
|--------|-------------|------------|
| 신규 가입 | 오늘 가입자 수 | vs 어제 |
| 청첩장 발행 | 오늘 발행 수 | vs 어제 |
| 총 조회수 | 모든 청첩장 조회 | vs 어제 |
| 쿠폰 사용 | 오늘 사용된 쿠폰 | vs 어제 |

---

## User Management

### User List (`/admin/users`)

| Column | Description | Sortable | Filterable |
|--------|-------------|----------|------------|
| ID | 사용자 ID | - | - |
| 이름 | 프로필 이름 | ✓ | ✓ |
| 이메일 | 이메일 주소 | ✓ | ✓ |
| 제공자 | 카카오/네이버 | - | ✓ |
| 상태 | 활성/탈퇴대기/탈퇴 | - | ✓ |
| 청첩장 수 | 보유 청첩장 수 | ✓ | - |
| 가입일 | 가입 날짜 | ✓ | ✓ (기간) |
| 최근 로그인 | 마지막 로그인 | ✓ | - |

### User Detail (`/admin/users/:id`)

```
┌─────────────────────────────────────────┐
│ 사용자 상세                              │
├─────────────────────────────────────────┤
│ 프로필                                   │
│ [이미지] 홍길동                           │
│ hong@example.com | 카카오                │
│ 가입: 2025-01-01 | 최근: 2025-01-07      │
├─────────────────────────────────────────┤
│ 청첩장 목록                              │
│ ┌─────┬──────────┬────────┬─────────┐   │
│ │상태  │ 제목      │ 예식일  │ 조회수   │   │
│ ├─────┼──────────┼────────┼─────────┤   │
│ │발행  │ 민영♥지훈  │ 05/16  │ 1,234   │   │
│ │임시  │ -         │ -      │ -       │   │
│ └─────┴──────────┴────────┴─────────┘   │
├─────────────────────────────────────────┤
│ 관리 액션                                │
│ [비밀번호 초기화] [계정 비활성화] [삭제]    │
└─────────────────────────────────────────┘
```

### User Actions

| Action | Permission | Description |
|--------|------------|-------------|
| 상세 조회 | OPERATOR+ | 사용자 정보 확인 |
| 청첩장 조회 | OPERATOR+ | 사용자의 청첩장 목록 |
| 계정 비활성화 | ADMIN+ | 임시 접근 차단 |
| 계정 삭제 | SUPER_ADMIN | 완전 삭제 |

---

## Invitation Management

### Invitation List (`/admin/invitations`)

| Column | Description | Filterable |
|--------|-------------|------------|
| ID | 청첩장 ID | - |
| 커플명 | 신랑♥신부 | ✓ |
| 상태 | 임시/발행/비공개/만료 | ✓ |
| URL | 슬러그 | ✓ |
| 예식일 | 예식 날짜 | ✓ (기간) |
| 조회수 | 총 조회수 | ✓ (범위) |
| 생성일 | 생성 날짜 | ✓ (기간) |
| 발행일 | 발행 날짜 | ✓ (기간) |

### Invitation Detail

| Section | Contents |
|---------|----------|
| 기본 정보 | 예식일, 장소, 신랑/신부 정보 |
| 디자인 | 테마, 커스터마이징 설정 |
| 콘텐츠 | 초대글, 갤러리 미리보기 |
| 통계 | 조회수, RSVP 현황, 방명록 수 |
| 쿠폰 | 사용된 쿠폰 정보 |

### Invitation Actions

| Action | Permission | Description |
|--------|------------|-------------|
| 미리보기 | OPERATOR+ | 새 탭에서 청첩장 보기 |
| 강제 비공개 | ADMIN+ | 문제 청첩장 비공개 처리 |
| 삭제 | SUPER_ADMIN | 완전 삭제 |

---

## Coupon Management

### Coupon List (`/admin/coupons`)

| Column | Description | Filterable |
|--------|-------------|------------|
| 코드 | 쿠폰 코드 | ✓ |
| 타입 | Standard/Promo/Partner/Gift | ✓ |
| 상태 | 활성/사용됨/만료/취소 | ✓ |
| 유효 기간 | 시작 ~ 종료 | ✓ |
| 사용자 | 사용한 사용자 | ✓ |
| 사용일 | 사용 날짜 | ✓ |
| 배치 | 배치 ID | ✓ |

### Coupon Generation (`/admin/coupons/generate`)

```
┌─────────────────────────────────────────┐
│ 쿠폰 생성                                │
├─────────────────────────────────────────┤
│ 타입: [Standard ▼]                       │
│                                         │
│ 수량: [____100____]                      │
│                                         │
│ 유효 기간:                               │
│ 시작: [2025-01-01] 종료: [2025-12-31]    │
│                                         │
│ 메모: [봄 시즌 프로모션________________]   │
│                                         │
│        [미리보기] [생성하기]              │
└─────────────────────────────────────────┘
```

### Batch Operations

| Action | Description |
|--------|-------------|
| 일괄 생성 | N개 쿠폰 한번에 생성 |
| CSV 내보내기 | 쿠폰 코드 목록 다운로드 |
| 일괄 만료 | 특정 배치 전체 만료 처리 |
| 일괄 취소 | 특정 배치 전체 취소 |

### Coupon Analytics

| Metric | Description |
|--------|-------------|
| 발급률 | 기간별 발급 수 |
| 사용률 | 발급 대비 사용 비율 |
| 만료율 | 미사용 만료 비율 |
| 채널별 | 타입별 사용 현황 |

---

## Guestbook Moderation

### Guestbook List (`/admin/guestbook`)

| Column | Description | Filterable |
|--------|-------------|------------|
| 청첩장 | 소속 청첩장 | ✓ |
| 작성자 | 작성자 이름 | ✓ |
| 내용 | 메시지 내용 | ✓ |
| 상태 | 공개/비밀글/숨김 | ✓ |
| 작성일 | 작성 날짜 | ✓ |

### Moderation Actions

| Action | Description |
|--------|-------------|
| 숨김 처리 | 부적절한 글 숨김 |
| 삭제 | 완전 삭제 |
| 일괄 처리 | 선택한 글 일괄 숨김/삭제 |

### Auto-Moderation (Optional)

| Rule | Action |
|------|--------|
| 욕설 감지 | 자동 숨김 + 알림 |
| 스팸 패턴 | 자동 숨김 + 알림 |
| 외부 링크 | 자동 검토 대기 |

---

## Analytics & Reports

### Overview (`/admin/analytics`)

#### 사용자 통계
- 일별/주별/월별 가입자 수
- OAuth 제공자별 비율
- 활성 사용자 수 (DAU/WAU/MAU)

#### 청첩장 통계
- 발행 수 추이
- 테마별 인기도
- 평균 갤러리 사진 수
- 기능 사용률 (RSVP, 방명록, 시크릿 등)

#### 트래픽 통계
- 총 조회수
- 고유 방문자 수
- 유입 경로 (카카오톡, 직접, 기타)
- 기기별 비율 (모바일/데스크탑)

### Export Reports

| Report | Format | Contents |
|--------|--------|----------|
| 사용자 리포트 | CSV/Excel | 가입 현황, 활성도 |
| 청첩장 리포트 | CSV/Excel | 발행 현황, 통계 |
| 쿠폰 리포트 | CSV/Excel | 발급/사용 현황 |
| 매출 리포트 | CSV/Excel | 기간별 쿠폰 사용 |

---

## System Settings

### General (`/admin/settings`)

| Setting | Description |
|---------|-------------|
| 서비스명 | 표시되는 서비스 이름 |
| 지원 이메일 | 문의 이메일 주소 |
| 약관 URL | 이용약관 링크 |
| 개인정보 URL | 개인정보처리방침 링크 |

### Feature Flags

| Flag | Description | Default |
|------|-------------|---------|
| `ai_invitation` | AI 초대글 기능 | ON |
| `secret_content` | 시크릿 콘텐츠 기능 | ON |
| `live_mode` | 라이브 웨딩 모드 | ON |
| `new_themes` | 신규 테마 표시 | OFF |

### Maintenance Mode

```
┌─────────────────────────────────────────┐
│ 점검 모드                                │
├─────────────────────────────────────────┤
│ 상태: [○ 비활성 / ● 활성]               │
│                                         │
│ 메시지:                                  │
│ [시스템 점검 중입니다. 잠시 후...]       │
│                                         │
│ 예상 종료: [2025-01-07 15:00]           │
│                                         │
│ 허용 IP: [관리자 IP 목록]               │
│                                         │
│        [저장]                            │
└─────────────────────────────────────────┘
```

---

## Admin Management

### Admin List (`/admin/admins`)
*SUPER_ADMIN 전용*

| Column | Description |
|--------|-------------|
| 이름 | 관리자 이름 |
| 이메일 | 로그인 이메일 |
| 역할 | SUPER_ADMIN/ADMIN/OPERATOR |
| 2FA | 활성화 여부 |
| 최근 로그인 | 마지막 접속 |

### Admin Actions

| Action | Permission |
|--------|------------|
| 관리자 추가 | SUPER_ADMIN |
| 역할 변경 | SUPER_ADMIN |
| 비밀번호 초기화 | SUPER_ADMIN |
| 관리자 삭제 | SUPER_ADMIN |

---

## Audit Logs

### Log Viewer (`/admin/logs`)

| Column | Description |
|--------|-------------|
| 시간 | 발생 시간 |
| 행위자 | 관리자/사용자/시스템 |
| 액션 | 수행한 작업 |
| 대상 | 영향받은 리소스 |
| IP | 접속 IP |
| 상세 | JSON 상세 정보 |

### Log Types

| Category | Actions |
|----------|---------|
| Auth | 로그인, 로그아웃, 2FA |
| User | 생성, 수정, 삭제 |
| Invitation | 발행, 비공개, 삭제 |
| Coupon | 생성, 사용, 취소 |
| Admin | 관리자 추가/수정/삭제 |
| System | 설정 변경, 점검 모드 |

### Log Retention
- 실시간 로그: 30일
- 아카이브: 3년

---

## Notifications

### Admin Alerts

| Event | Notification |
|-------|--------------|
| 신규 가입 급증 | 이메일 + 대시보드 |
| 비정상 트래픽 | 이메일 + Slack |
| 시스템 오류 | 이메일 + Slack + SMS |
| 쿠폰 재고 부족 | 이메일 |

### Notification Channels

| Channel | Config |
|---------|--------|
| Email | SMTP / SendGrid |
| Slack | Webhook URL |
| SMS | 알리고 / Twilio |
