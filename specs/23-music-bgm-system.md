# Music & BGM System Specification

## Overview

ì²­ì²©ì¥ ë°°ê²½ìŒì•…(BGM) ì‹œìŠ¤í…œ ìŠ¤í™ì…ë‹ˆë‹¤.
ëª¨ë°”ì¼ í™˜ê²½ì˜ ìë™ì¬ìƒ ì œí•œì„ ê³ ë ¤í•˜ì—¬ ìµœì ì˜ ìŒì•… ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## ê¸°ëŠ¥ ìš”ì•½

| ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|----------|
| í”„ë¦¬ì…‹ ìŒì•… ì„ íƒ | ì œê³µë˜ëŠ” ìŒì•… ëª©ë¡ì—ì„œ ì„ íƒ | P0 |
| ìŒì•… ë¯¸ë¦¬ë“£ê¸° | ì„ íƒ ì „ ë¯¸ë¦¬ë“£ê¸° | P0 |
| ìë™ì¬ìƒ ì²˜ë¦¬ | iOS/Android ìë™ì¬ìƒ ì •ì±… ëŒ€ì‘ | P0 |
| ìŒì•… ì»¨íŠ¸ë¡¤ UI | ì¬ìƒ/ì¼ì‹œì •ì§€/ìŒì†Œê±° ë²„íŠ¼ | P0 |
| ì»¤ìŠ¤í…€ ìŒì•… ì—…ë¡œë“œ | ì‚¬ìš©ì ìŒì•… íŒŒì¼ ì—…ë¡œë“œ | P1 |
| ë³¼ë¥¨ ì¡°ì ˆ | ìŒëŸ‰ ì¡°ì ˆ ìŠ¬ë¼ì´ë” | P2 |
| êµ¬ê°„ ë°˜ë³µ | íŠ¹ì • êµ¬ê°„ë§Œ ë°˜ë³µ ì¬ìƒ | P3 |

---

## 1. í”„ë¦¬ì…‹ ìŒì•… ë¼ì´ë¸ŒëŸ¬ë¦¬

### 1.1. ìŒì•… ì¹´í…Œê³ ë¦¬

| ì¹´í…Œê³ ë¦¬ | ì„¤ëª… | ì˜ˆì‹œ |
|----------|------|------|
| **í´ë˜ì‹** | ê²°í˜¼ì‹ ì „í†µ ìŒì•… | Canon in D, Wedding March |
| **í”¼ì•„ë…¸** | ì”ì”í•œ í”¼ì•„ë…¸ ì—°ì£¼ | River Flows in You, Kiss the Rain |
| **ì–´ì¿ ìŠ¤í‹±** | ê¸°íƒ€/ìš°ì¿¨ë ë ˆ ì—°ì£¼ | Here Comes the Sun, Can't Help Falling in Love |
| **ì˜¤ì¼€ìŠ¤íŠ¸ë¼** | ì›…ì¥í•œ ì˜¤ì¼€ìŠ¤íŠ¸ë¼ | A Thousand Years, All of Me |
| **ì¬ì¦ˆ** | ì„¸ë ¨ëœ ì¬ì¦ˆ | Fly Me to the Moon, La Vie en Rose |
| **K-Pop ì¸ìŠ¤íŠ¸ë£¨ë©˜íƒˆ** | K-Pop ë°˜ì£¼ ë²„ì „ | ì¢‹ì€ ë‚ , ë´„ë‚  (Inst.) |

### 1.2. ìŒì•… ë©”íƒ€ë°ì´í„°

```typescript
interface MusicTrack {
  id: string;
  title: string;
  artist: string;
  category: MusicCategory;
  duration: number;           // seconds
  previewUrl: string;         // 30ì´ˆ ë¯¸ë¦¬ë“£ê¸°
  fullUrl: string;            // ì „ì²´ ìŒì› (ë°œí–‰ í›„)
  thumbnailUrl: string;       // ì•¨ë²” ì•„íŠ¸
  bpm?: number;               // í…œí¬ (ì• ë‹ˆë©”ì´ì…˜ ì‹±í¬ìš©)
  mood: string[];             // ["romantic", "bright", "calm"]
  license: LicenseType;
}

type MusicCategory = 
  | "classical" 
  | "piano" 
  | "acoustic" 
  | "orchestra" 
  | "jazz" 
  | "kpop_inst";

type LicenseType = 
  | "royalty_free"      // ë¡œì—´í‹° í”„ë¦¬
  | "creative_commons"  // CC ë¼ì´ì„ ìŠ¤
  | "licensed";         // ì •ì‹ ë¼ì´ì„ ìŠ¤ êµ¬ë§¤
```

### 1.3. ë¼ì´ì„ ìŠ¤ ì •ì±…

| ë¼ì´ì„ ìŠ¤ | ì¶œì²˜ | ë¹„ìš© | ì œí•œ |
|----------|------|------|------|
| Royalty Free | Artlist, Epidemic Sound | ì›”ì •ì•¡ | ìƒì—…ì  ì‚¬ìš© ê°€ëŠ¥ |
| Creative Commons | Free Music Archive | ë¬´ë£Œ | ì €ì‘ì í‘œê¸° í•„ìš” |
| Public Domain | í´ë˜ì‹ ì—°ì£¼ | ë¬´ë£Œ | ì œí•œ ì—†ìŒ |

---

## 2. ìë™ì¬ìƒ ì •ì±… ëŒ€ì‘

### 2.1. ë¸Œë¼ìš°ì €ë³„ ìë™ì¬ìƒ ì •ì±…

| ë¸Œë¼ìš°ì € | ìë™ì¬ìƒ | ì¡°ê±´ |
|----------|----------|------|
| **iOS Safari** | âŒ ë¶ˆê°€ | ì‚¬ìš©ì ì¸í„°ë™ì…˜ í•„ìˆ˜ |
| **iOS ì¹´ì¹´ì˜¤í†¡ ì¸ì•±** | âŒ ë¶ˆê°€ | ì‚¬ìš©ì ì¸í„°ë™ì…˜ í•„ìˆ˜ |
| **Android Chrome** | âš ï¸ ì¡°ê±´ë¶€ | ìŒì†Œê±° ìƒíƒœì—ì„œë§Œ ìë™ì¬ìƒ |
| **Android ì¹´ì¹´ì˜¤í†¡ ì¸ì•±** | âš ï¸ ì¡°ê±´ë¶€ | ìŒì†Œê±° ìƒíƒœì—ì„œë§Œ |
| **Desktop Chrome** | âš ï¸ ì¡°ê±´ë¶€ | MEI(Media Engagement Index) ê¸°ë°˜ |
| **Desktop Safari** | âŒ ë¶ˆê°€ | ì‚¬ìš©ì ì¸í„°ë™ì…˜ í•„ìˆ˜ |

### 2.2. êµ¬í˜„ ì „ëµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì²­ì²©ì¥ ì²« ì§„ì…                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ìë™ì¬ìƒ ì‹œë„ (ìŒì†Œê±° ìƒíƒœ)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                   â–¼
              [ì„±ê³µ]                  [ì‹¤íŒ¨]
                â”‚                       â”‚
                â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ìŒì•… ì¬ìƒ í‘œì‹œ UI    â”‚   â”‚ ìŒì•… ì¬ìƒ ìœ ë„ UI    â”‚
    â”‚ ğŸ”‡ íƒ­í•˜ì—¬ ì†Œë¦¬ ì¼œê¸°  â”‚   â”‚ ğŸµ íƒ­í•˜ì—¬ ìŒì•… ë“£ê¸°  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                       â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚      ì‚¬ìš©ì ì²« íƒ­/í´ë¦­         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   ìŒì†Œê±° í•´ì œ + ìŒì•… ì¬ìƒ      â”‚
              â”‚   ğŸ”Š ì¬ìƒ ì¤‘ (íƒ­í•˜ì—¬ ë„ê¸°)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3. ì½”ë“œ êµ¬í˜„

```typescript
// hooks/useBackgroundMusic.ts
export function useBackgroundMusic(trackUrl: string) {
  const audioRef = useRef<HTMLAudioElement | null>(null);
  const [isPlaying, setIsPlaying] = useState(false);
  const [isMuted, setIsMuted] = useState(true);
  const [canAutoplay, setCanAutoplay] = useState(false);

  useEffect(() => {
    const audio = new Audio(trackUrl);
    audio.loop = true;
    audio.volume = 0.5;
    audioRef.current = audio;

    // ìë™ì¬ìƒ í…ŒìŠ¤íŠ¸ (ìŒì†Œê±° ìƒíƒœ)
    audio.muted = true;
    audio.play()
      .then(() => {
        setCanAutoplay(true);
        setIsPlaying(true);
      })
      .catch(() => {
        setCanAutoplay(false);
      });

    return () => {
      audio.pause();
      audio.src = "";
    };
  }, [trackUrl]);

  const togglePlay = useCallback(() => {
    if (!audioRef.current) return;

    if (isPlaying) {
      audioRef.current.pause();
      setIsPlaying(false);
    } else {
      audioRef.current.muted = false;
      setIsMuted(false);
      audioRef.current.play();
      setIsPlaying(true);
    }
  }, [isPlaying]);

  const unmute = useCallback(() => {
    if (!audioRef.current) return;
    audioRef.current.muted = false;
    setIsMuted(false);
  }, []);

  return { isPlaying, isMuted, canAutoplay, togglePlay, unmute };
}
```

---

## 3. ìŒì•… ì»¨íŠ¸ë¡¤ UI

### 3.1. í”Œë¡œíŒ… ë²„íŠ¼ (ê¸°ë³¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                        [ì²­ì²©ì¥ ì½˜í…ì¸ ]                           â”‚
â”‚                                                                 â”‚
â”‚                                                           â”Œâ”€â”€â”€â” â”‚
â”‚                                                           â”‚ğŸµâ”‚ â”‚  â† í”Œë¡œíŒ… ë²„íŠ¼
â”‚                                                           â””â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2. ë²„íŠ¼ ìƒíƒœ

| ìƒíƒœ | ì•„ì´ì½˜ | ìƒ‰ìƒ | ë™ì‘ |
|------|--------|------|------|
| ì¬ìƒ ëŒ€ê¸° | ğŸµ | íšŒìƒ‰ + í„ìŠ¤ | íƒ­ ì‹œ ì¬ìƒ ì‹œì‘ |
| ì¬ìƒ ì¤‘ | ğŸ”Š | í•‘í¬ | íƒ­ ì‹œ ì¼ì‹œì •ì§€ |
| ì¼ì‹œì •ì§€ | ğŸ”‡ | íšŒìƒ‰ | íƒ­ ì‹œ ì¬ìƒ |
| ìŒì†Œê±° ì¬ìƒ | ğŸ”‡ | íšŒìƒ‰ + í„ìŠ¤ | íƒ­ ì‹œ ìŒì†Œê±° í•´ì œ |

### 3.3. ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

```tsx
// components/MusicControl.tsx
export function MusicControl({ trackUrl }: { trackUrl: string }) {
  const { isPlaying, isMuted, togglePlay, unmute } = useBackgroundMusic(trackUrl);

  const handleClick = () => {
    if (isMuted && isPlaying) {
      unmute();
    } else {
      togglePlay();
    }
  };

  return (
    <motion.button
      onClick={handleClick}
      className="fixed bottom-24 right-4 z-50 w-12 h-12 rounded-full 
                 bg-white/90 backdrop-blur-sm shadow-lg
                 flex items-center justify-center"
      animate={isMuted && isPlaying ? { scale: [1, 1.1, 1] } : {}}
      transition={{ repeat: Infinity, duration: 2 }}
    >
      {isPlaying ? (isMuted ? "ğŸ”‡" : "ğŸ”Š") : "ğŸµ"}
    </motion.button>
  );
}
```

### 3.4. í™•ì¥ ì»¨íŠ¸ë¡¤ (P2)

```
í”Œë¡œíŒ… ë²„íŠ¼ ê¸¸ê²Œ ëˆ„ë¥´ë©´ í™•ì¥:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  ğŸµ Canon in D                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”  2:34 / 5:12   â”‚
â”‚                                         â”‚
â”‚     â—€â—€      â–¶/âšâš      â–¶â–¶               â”‚
â”‚                                         â”‚
â”‚  ğŸ”Š â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”                 â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ì»¤ìŠ¤í…€ ìŒì•… ì—…ë¡œë“œ (P1)

### 4.1. ì—…ë¡œë“œ ì œí•œ

| í•­ëª© | ì œí•œ |
|------|------|
| íŒŒì¼ í˜•ì‹ | MP3, AAC, WAV, OGG |
| íŒŒì¼ í¬ê¸° | ìµœëŒ€ 10MB |
| ê¸¸ì´ | ìµœì†Œ 30ì´ˆ, ìµœëŒ€ 10ë¶„ |
| ì €ì‘ê¶Œ | ì‚¬ìš©ì ì±…ì„ (ë™ì˜ í•„ìˆ˜) |

### 4.2. ì—…ë¡œë“œ í”Œë¡œìš°

```
[ìŒì•… ì„ íƒ] íƒ­
     â”‚
     â”œâ”€â”€ [í”„ë¦¬ì…‹ ìŒì•…] â† ê¸°ë³¸
     â”‚        â””â”€â”€ ì¹´í…Œê³ ë¦¬ë³„ ëª©ë¡
     â”‚
     â””â”€â”€ [ë‚´ ìŒì•… ì—…ë¡œë“œ]
              â”‚
              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  ìŒì•… íŒŒì¼ ì—…ë¡œë“œ                    â”‚
     â”‚                                     â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
     â”‚  â”‚                               â”‚  â”‚
     â”‚  â”‚     íŒŒì¼ ì„ íƒ ë˜ëŠ” ë“œë˜ê·¸      â”‚  â”‚
     â”‚  â”‚     MP3, AAC, WAV (ìµœëŒ€ 10MB)  â”‚  â”‚
     â”‚  â”‚                               â”‚  â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
     â”‚                                     â”‚
     â”‚  â˜‘ï¸ ë³¸ ìŒì•… íŒŒì¼ì˜ ì €ì‘ê¶Œì´ ìˆê±°ë‚˜   â”‚
     â”‚     ì €ì‘ê¶Œìì˜ í—ˆë½ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.    â”‚
     â”‚                                     â”‚
     â”‚  [ì—…ë¡œë“œ]                           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3. ì €ì‘ê¶Œ ê³ ì§€

```tsx
const COPYRIGHT_DISCLAIMER = `
## ìŒì•… ì €ì‘ê¶Œ ì•ˆë‚´

ì—…ë¡œë“œí•˜ì‹œëŠ” ìŒì•… íŒŒì¼ì— ëŒ€í•œ ì €ì‘ê¶Œ ì±…ì„ì€ 
ì—…ë¡œë” ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤.

### ì‚¬ìš© ê°€ëŠ¥í•œ ìŒì•…
- ì§ì ‘ ì‘ê³¡/ì—°ì£¼í•œ ìŒì•…
- ì €ì‘ê¶Œìì—ê²Œ ì‚¬ìš© í—ˆë½ì„ ë°›ì€ ìŒì•…
- ë¡œì—´í‹° í”„ë¦¬ ìŒì•… (ìƒì—…ì  ì‚¬ìš© ê°€ëŠ¥ í™•ì¸)
- í¼ë¸”ë¦­ ë„ë©”ì¸ ìŒì•…

### ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ìŒì•…
- ë¬´ë‹¨ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•œ ìƒì—… ìŒì›
- ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ì—ì„œ ë…¹ìŒí•œ ìŒì•…
- ì €ì‘ê¶Œì í—ˆë½ ì—†ëŠ” K-Pop/íŒì†¡

ìœ„ë°˜ ì‹œ ì €ì‘ê¶Œë²•ì— ë”°ë¼ ë²•ì  ì±…ì„ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°,
ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`;
```

---

## 5. ì—ë””í„° ìŒì•… ì„ íƒ UI

### 5.1. ìŒì•… ì„ íƒ ì„¹ì…˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ ë°°ê²½ìŒì•…                                      [ì‚¬ìš© ì•ˆ í•¨ â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ í´ë˜ì‹   â”‚ â”‚ í”¼ì•„ë…¸   â”‚ â”‚ ì–´ì¿ ìŠ¤í‹± â”‚ â”‚ ì¬ì¦ˆ     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸµ  Canon in D                                    â–¶ â”‚âœ“â”‚   â”‚
â”‚  â”‚     Pachelbel â€¢ í´ë˜ì‹ â€¢ 5:12                          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸµ  River Flows in You                            â–¶ â”‚ â”‚   â”‚
â”‚  â”‚     Yiruma â€¢ í”¼ì•„ë…¸ â€¢ 3:45                             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸµ  A Thousand Years                              â–¶ â”‚ â”‚   â”‚
â”‚  â”‚     Christina Perri (Inst.) â€¢ ì˜¤ì¼€ìŠ¤íŠ¸ë¼ â€¢ 4:32        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [+ ë‚´ ìŒì•… ì—…ë¡œë“œ]                                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2. ë¯¸ë¦¬ë“£ê¸° ëª¨ë‹¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ Canon in D                                           [âœ•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚              â”‚                             â”‚
â”‚                    â”‚   ğŸ¼ ì•¨ë²”    â”‚                             â”‚
â”‚                    â”‚     ì•„íŠ¸     â”‚                             â”‚
â”‚                    â”‚              â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                 â”‚
â”‚                    Pachelbel                                    â”‚
â”‚                    í´ë˜ì‹ â€¢ 5:12                                â”‚
â”‚                                                                 â”‚
â”‚           â”â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”  0:30 / 5:12               â”‚
â”‚                                                                 â”‚
â”‚                        â–¶ ì¬ìƒ                                   â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚                 [ì´ ìŒì•… ì„ íƒí•˜ê¸°]                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ë°ì´í„° ëª¨ë¸

### 6.1. Prisma Schema

```prisma
model MusicTrack {
  id          String   @id @default(cuid())
  title       String
  artist      String
  category    String   // "classical" | "piano" | etc.
  duration    Int      // seconds
  fileUrl     String
  previewUrl  String
  thumbnailUrl String?
  bpm         Int?
  mood        String[] // ["romantic", "calm"]
  license     String   // "royalty_free" | "cc" | "licensed"
  isDefault   Boolean  @default(true) // í”„ë¦¬ì…‹ ìŒì•… ì—¬ë¶€
  createdAt   DateTime @default(now())

  invitations Invitation[]
}

model Invitation {
  // ... ê¸°ì¡´ í•„ë“œ
  
  musicTrackId  String?
  musicTrack    MusicTrack? @relation(fields: [musicTrackId], references: [id])
  customMusicUrl String?    // ì»¤ìŠ¤í…€ ì—…ë¡œë“œ ìŒì•… URL
  musicEnabled  Boolean     @default(true)
  musicVolume   Float       @default(0.5) // 0.0 ~ 1.0
}
```

### 6.2. API Endpoints

```
GET  /api/music                    # í”„ë¦¬ì…‹ ìŒì•… ëª©ë¡
GET  /api/music/:id                # ìŒì•… ìƒì„¸ ì •ë³´
GET  /api/music/:id/preview        # ë¯¸ë¦¬ë“£ê¸° URL (30ì´ˆ)
POST /api/music/upload             # ì»¤ìŠ¤í…€ ìŒì•… ì—…ë¡œë“œ
```

---

## 7. ì„±ëŠ¥ ìµœì í™”

### 7.1. ì˜¤ë””ì˜¤ ë¡œë”© ì „ëµ

```typescript
// í”„ë¦¬ë¡œë“œ: ì²­ì²©ì¥ ë¡œë”© ì‹œ ìŒì•…ë„ ë¯¸ë¦¬ ë¡œë“œ
const preloadAudio = (url: string) => {
  const link = document.createElement("link");
  link.rel = "preload";
  link.as = "audio";
  link.href = url;
  document.head.appendChild(link);
};

// ì²­í¬ ë¡œë”©: Range Requestë¡œ ì²˜ìŒ ë¶€ë¶„ë§Œ ë¨¼ì € ë¡œë“œ
const audio = new Audio();
audio.preload = "metadata"; // ë©”íƒ€ë°ì´í„°ë§Œ ë¨¼ì €
// ì¬ìƒ ì‹œì‘ ì‹œ ì‹¤ì œ ë°ì´í„° ë¡œë“œ
```

### 7.2. íŒŒì¼ ìµœì í™”

| í•­ëª© | ê¶Œì¥ê°’ |
|------|--------|
| ë¹„íŠ¸ë ˆì´íŠ¸ | 128kbps (ì¶©ë¶„í•œ í’ˆì§ˆ) |
| ìƒ˜í”Œë ˆì´íŠ¸ | 44.1kHz |
| í¬ë§· | AAC (ìµœì ) ë˜ëŠ” MP3 |
| íŒŒì¼ í¬ê¸° | 1ë¶„ë‹¹ ì•½ 1MB |

---

## 8. ì ‘ê·¼ì„± ê³ ë ¤

### 8.1. ìŒì•… ì»¨íŠ¸ë¡¤ ì ‘ê·¼ì„±

```tsx
<button
  aria-label={isPlaying ? "ë°°ê²½ìŒì•… ì¼ì‹œì •ì§€" : "ë°°ê²½ìŒì•… ì¬ìƒ"}
  aria-pressed={isPlaying}
  role="switch"
>
  {/* ... */}
</button>
```

### 8.2. ì‚¬ìš©ì ì„¤ì • ì¡´ì¤‘

```typescript
// ì‹œìŠ¤í…œ ì„¤ì •ì—ì„œ "ëª¨ì…˜ ì¤„ì´ê¸°" í™œì„±í™” ì‹œ
const prefersReducedMotion = window.matchMedia(
  "(prefers-reduced-motion: reduce)"
).matches;

// ìë™ì¬ìƒ ë¹„í™œì„±í™” ê³ ë ¤
if (prefersReducedMotion) {
  // ìŒì•… ìë™ì¬ìƒ ì‹œë„í•˜ì§€ ì•ŠìŒ
}
```

---

## 9. ë¶„ì„ ì´ë²¤íŠ¸

| ì´ë²¤íŠ¸ | ì„¤ëª… | ì†ì„± |
|--------|------|------|
| `music_play` | ìŒì•… ì¬ìƒ ì‹œì‘ | track_id, source (auto/manual) |
| `music_pause` | ìŒì•… ì¼ì‹œì •ì§€ | track_id, play_duration |
| `music_unmute` | ìŒì†Œê±° í•´ì œ | track_id |
| `music_select` | ìŒì•… ì„ íƒ (ì—ë””í„°) | track_id, category |
| `music_preview` | ë¯¸ë¦¬ë“£ê¸° ì¬ìƒ | track_id |
| `music_upload` | ì»¤ìŠ¤í…€ ìŒì•… ì—…ë¡œë“œ | file_size, duration |
